<html>
  <head>
    <script src="./bpmn-viewer.js"></script>
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  </head>
  <body>
    <script type="application/javascript" src="./globals.js"></script>
    <script type="application/javascript" src="./utils.js"></script>
    <script type="application/javascript" src="./collision.js"></script>
    <script type="application/javascript" src="./sequenceFlow.js"></script>
    <script type="application/javascript" src="./task.js"></script>
    <script type="application/javascript" src="./gateway.js"></script>
    <script type="application/javascript" src="./event.js"></script>
    <script type="application/javascript">
    function loadBpmn() {
      const input = document.createElement('input');

      input.setAttribute('type', 'file');
      input.setAttribute('accept', '.bpmn');

      input.addEventListener('change', evt => {
        const file = input.files[0];
        const reader = new FileReader();

        reader.addEventListener('load', e => {
          var BpmnViewer = window.BpmnJS;

          var viewer = new BpmnViewer({ container: document.createElement('div') });

          viewer.importXML(e.target.result, (err, result) => {
            handleModel(viewer);
            document.body.removeChild(splash);
          });
        });

        reader.readAsText(file);
      });
      input.click();
    }
    </script>

    <div style="position:absolute; top: 0; bottom: 0; left: 0; right: 0; background-color: #000000" id="splash">
      <div style="color: #c6caff; text-align: center; font-size: 30em; cursor: pointer;" onClick="loadBpmn()">ðŸ¦‡</div>
      <div style="color: #c6caff; text-align: center; font-size: 8em; font-family: 'Roboto', sans-serif;">BAT</div>
    </div>

    <!-- <a-scene>
      <a-assets>
        <a-asset-item id="human-obj" src="/human.obj"></a-asset-item>
      </a-assets>
      <a-entity geometry="primitive: sequenceFlow; points:0 0, 0 5, 0 10, 5 10, 10 10, 10 15;" material="color: #FFFFFF"></a-entity>
      <a-entity geometry="primitive: sequenceFlowLine; points:0 0, 0 5, 0 10, 5 10, 10 10, 10 15;" material="color: #333333"></a-entity>

      <a-entity geometry="primitive: task; position: 10 15; width: 10; height: 10;" material="color: #FFFFFF"></a-entity>
      <a-entity geometry="primitive: taskLine; position: 10 15; width: 10; height: 10;" material="color: #333333"></a-entity>

      <a-entity geometry="primitive: circle; radius: 2;" rotation="-90 0 0" material="color: #FFFFFF" position="5 0 -5"></a-entity>
      <a-entity geometry="primitive: circle; radius: 2.3;" rotation="-90 0 0" material="color: #333333;" position="5 -0.005 -5"></a-entity>

      <a-entity obj-model="obj: #human-obj;" scale="0.1 0.1 0.1" rotation="0 90 0"></a-entity>

      <a-sky color="#ECECEC"></a-sky>
    </a-scene> -->

  </body>
</html>
