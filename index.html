<html>
  <head>
    <script src="./bpmn-viewer.js"></script>
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  </head>
  <body>
    <script type="application/javascript" src="./globals.js"></script>
    <script type="application/javascript" src="./utils.js"></script>
    <script type="application/javascript" src="./collision.js"></script>
    <script type="application/javascript" src="./sequenceFlow.js"></script>
    <script type="application/javascript" src="./task.js"></script>
    <script type="application/javascript" src="./gateway.js"></script>
    <script type="application/javascript" src="./event.js"></script>
    <script type="application/javascript">
    function loadBpmn() {
      const input = document.createElement('input');

      input.setAttribute('type', 'file');
      input.setAttribute('accept', '.bpmn');

      input.addEventListener('change', evt => {
        const file = input.files[0];
        const reader = new FileReader();

        reader.addEventListener('load', e => {
          var BpmnViewer = window.BpmnJS;

          var viewer = new BpmnViewer({ container: document.createElement('div') });

          viewer.importXML(e.target.result, (err, result) => {
            handleModel(viewer);
            document.body.removeChild(splash);
          });
        });

        reader.readAsText(file);
      });
      input.click();
    }
    </script>

    <div style="position:absolute; top: 0; bottom: 0; left: 0; right: 0; background-color: #000000" id="splash">
      <div style="color: #c6caff; text-align: center; font-size: 30em; cursor: pointer;" onClick="loadBpmn()">ðŸ¦‡</div>
      <div style="color: #c6caff; text-align: center; font-size: 8em; font-family: 'Roboto', sans-serif;">BAT</div>
    </div>
  </body>
</html>
