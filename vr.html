<html>
    <head>
      <script src="./bpmn-viewer.js"></script>
      <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
      <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
      <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    </head>

    <style>
        canvas[width="2688"] {
            width: 200% !important;
        }

        .content-container {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: 1s;
        }

        .bjs-powered-by {
            display: none !important;
        }
    </style>

    <body>
      <div id="vrContent" class="content-container" style="opacity: 1;"></div>
      <div id="bpmnContent" class="content-container" style="opacity: 0;"></div>
      <div id="splashContent" class="content-container" style="opacity: 0;"></div>

      <script type="application/javascript">
  
      const bpmnXml = `<?xml version="1.0" encoding="UTF-8"?>
      <bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">
        <bpmn:process id="Process_1" isExecutable="false">
          <bpmn:startEvent id="StartEvent_1">
            <bpmn:outgoing>SequenceFlow_0x23rei</bpmn:outgoing>
          </bpmn:startEvent>
          <bpmn:sequenceFlow id="SequenceFlow_0x23rei" sourceRef="StartEvent_1" targetRef="Task_0uu2aok" />
          <bpmn:userTask id="Task_0uu2aok" name="foobar">
            <bpmn:incoming>SequenceFlow_0x23rei</bpmn:incoming>
            <bpmn:outgoing>SequenceFlow_01dx52h</bpmn:outgoing>
          </bpmn:userTask>
          <bpmn:endEvent id="EndEvent_1thnu37">
            <bpmn:incoming>SequenceFlow_0559nkc</bpmn:incoming>
          </bpmn:endEvent>
          <bpmn:sequenceFlow id="SequenceFlow_01dx52h" sourceRef="Task_0uu2aok" targetRef="ExclusiveGateway_1n8lkxs" />
          <bpmn:exclusiveGateway id="ExclusiveGateway_1n8lkxs">
            <bpmn:incoming>SequenceFlow_01dx52h</bpmn:incoming>
            <bpmn:outgoing>SequenceFlow_0559nkc</bpmn:outgoing>
            <bpmn:outgoing>SequenceFlow_0w8bh64</bpmn:outgoing>
          </bpmn:exclusiveGateway>
          <bpmn:sequenceFlow id="SequenceFlow_0559nkc" sourceRef="ExclusiveGateway_1n8lkxs" targetRef="EndEvent_1thnu37" />
          <bpmn:endEvent id="EndEvent_03ieesg">
            <bpmn:incoming>SequenceFlow_0m2yiuk</bpmn:incoming>
          </bpmn:endEvent>
          <bpmn:sequenceFlow id="SequenceFlow_0w8bh64" sourceRef="ExclusiveGateway_1n8lkxs" targetRef="Task_1fb2om7" />
          <bpmn:sequenceFlow id="SequenceFlow_0m2yiuk" sourceRef="Task_1fb2om7" targetRef="EndEvent_03ieesg" />
          <bpmn:serviceTask id="Task_1fb2om7" name="this is a service task">
            <bpmn:incoming>SequenceFlow_0w8bh64</bpmn:incoming>
            <bpmn:outgoing>SequenceFlow_0m2yiuk</bpmn:outgoing>
          </bpmn:serviceTask>
        </bpmn:process>
        <bpmndi:BPMNDiagram id="BPMNDiagram_1">
          <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">
            <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
              <dc:Bounds x="184" y="147" width="36" height="36" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="157" y="183" width="90" height="20" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNEdge id="SequenceFlow_0x23rei_di" bpmnElement="SequenceFlow_0x23rei">
              <di:waypoint xsi:type="dc:Point" x="220" y="165" />
              <di:waypoint xsi:type="dc:Point" x="319" y="165" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="269.5" y="144" width="0" height="12" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNShape id="UserTask_0cisdy6_di" bpmnElement="Task_0uu2aok">
              <dc:Bounds x="319" y="125" width="100" height="80" />
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape id="EndEvent_1thnu37_di" bpmnElement="EndEvent_1thnu37">
              <dc:Bounds x="688" y="147" width="36" height="36" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="661" y="187" width="90" height="12" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNEdge id="SequenceFlow_01dx52h_di" bpmnElement="SequenceFlow_01dx52h">
              <di:waypoint xsi:type="dc:Point" x="419" y="165" />
              <di:waypoint xsi:type="dc:Point" x="517" y="165" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="423" y="144" width="90" height="12" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNShape id="ExclusiveGateway_1n8lkxs_di" bpmnElement="ExclusiveGateway_1n8lkxs" isMarkerVisible="true">
              <dc:Bounds x="517" y="140" width="50" height="50" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="542" y="194" width="0" height="12" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNEdge id="SequenceFlow_0559nkc_di" bpmnElement="SequenceFlow_0559nkc">
              <di:waypoint xsi:type="dc:Point" x="567" y="165" />
              <di:waypoint xsi:type="dc:Point" x="688" y="165" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="627.5" y="144" width="0" height="12" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNShape id="EndEvent_03ieesg_di" bpmnElement="EndEvent_03ieesg">
              <dc:Bounds x="688" y="344" width="36" height="36" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="706" y="384" width="0" height="12" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNEdge id="SequenceFlow_0w8bh64_di" bpmnElement="SequenceFlow_0w8bh64">
              <di:waypoint xsi:type="dc:Point" x="542" y="190" />
              <di:waypoint xsi:type="dc:Point" x="542" y="322" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="557" y="250" width="0" height="12" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge id="SequenceFlow_0m2yiuk_di" bpmnElement="SequenceFlow_0m2yiuk">
              <di:waypoint xsi:type="dc:Point" x="592" y="362" />
              <di:waypoint xsi:type="dc:Point" x="688" y="362" />
              <bpmndi:BPMNLabel>
                <dc:Bounds x="640" y="341" width="0" height="12" />
              </bpmndi:BPMNLabel>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNShape id="ServiceTask_0pxu4as_di" bpmnElement="Task_1fb2om7">
              <dc:Bounds x="492" y="322" width="100" height="80" />
            </bpmndi:BPMNShape>
          </bpmndi:BPMNPlane>
        </bpmndi:BPMNDiagram>
      </bpmn:definitions>
  `;
  
  window.BATmobile = false;
  window.BATVR = true;
  </script>
  <script type="application/javascript" src="./globals.js"></script>
  <script type="application/javascript" src="./utils.js"></script>
  <script type="application/javascript" src="./collision.js"></script>
  <script type="application/javascript" src="./sequenceFlow.js"></script>
  <script type="application/javascript" src="./task.js"></script>
  <script type="application/javascript" src="./gateway.js"></script>
  <script type="application/javascript" src="./event.js"></script>
  <script type="application/javascript" src="./wsConnector.js"></script>
  <script type="application/javascript">
  var BpmnViewer = window.BpmnJS;
  
  var viewer = new BpmnViewer({ container: document.createElement('div') });
  
    viewer.importXML(bpmnXml, (err, result) => {
      handleModel(viewer);
    });
  </script>
  </body>
  </html>
  